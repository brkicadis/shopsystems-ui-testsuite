# Codeception Test Suite Configuration
#
# Suite for acceptance tests.
# Perform tests in browser using the WebDriver or PhpBrowser.
# If you need both WebDriver and PHPBrowser tests - create a separate suite.

actor: AcceptanceTester
modules:
  enabled:
    - WebDriver:
        url: '%SHOP_URL%'
        browser: chrome # 'chrome' or 'firefox'
        restart: true #run each test in new browser window
    - \Helper\Acceptance
    - \Helper\DbHelper
    - Asserts
    - Db:
        dsn: 'mysql:host=%DB_HOST%:%DB_PORT%;dbname=%DB_NAME%;charset=utf8'
        user: '%DB_USER%'
        password: '%DB_PASSWORD%'
        waitlock: 10
env:
  ci:
    modules:
      config:
        WebDriver:
          host: 'hub-cloud.browserstack.com'
          port: 80
          url: '%SHOP_URL%'
          browser: chrome # 'chrome' or 'firefox'
          capabilities:
            'build': '%SHOP_VERSION%'
            'project': '%SHOP_SYSTEM%-%SHOP_VERSION%-%EXTENSION_VERSION%'
            'browserstack.user': '%BROWSERSTACK_USER%'
            'browserstack.key': '%BROWSERSTACK_ACCESS_KEY%'
        Db:
          dsn: 'mysql:host=%DB_HOST%;dbname=%DB_NAME%;charset=utf8'
  ci_magento2:
    modules:
      config:
        WebDriver:
          host: 'hub-cloud.browserstack.com'
          port: 80
          url: '%SHOP_URL%'
          browser: chrome # 'chrome' or 'firefox'
          capabilities:
            'build': '%SHOP_VERSION%'
            'project': '%SHOP_SYSTEM%-%SHOP_VERSION%-%EXTENSION_VERSION%'
            'browserstack.user': '%BROWSERSTACK_USER%'
            'browserstack.key': '%BROWSERSTACK_ACCESS_KEY%'
        Db:
          dsn: 'mysql:host=%DB_HOST%:%DB_PORT%;dbname=%DB_NAME%;charset=utf8'
#  env1:
#    modules:
#      config:
#        Db:
##          dsn: 'mysql:dbname=testdb_1;host=127.0.0.1'
#        WebDriver:
##          url: 'http://test1.localhost/'
#  env2:
#    modules:
#      config:
#        Db:
##          dsn: 'mysql:dbname=testdb_2;host=127.0.0.1'
#        WebDriver:
##          url: 'http://test2.localhost/'
#  env3:
#    modules:
#      config:
#        Db:
##          dsn: 'mysql:dbname=testdb_3;host=127.0.0.1'
#        WebDriver:
##          url: 'http://test3.localhost/'
#  env4:
#    modules:
#      config:
#        Db:
##          dsn: 'mysql:dbname=testdb_4;host=127.0.0.1'
#        WebDriver:
##          url: 'http://test4.localhost/'
#  env5:
#    modules:
#      config:
#        Db:
##          dsn: 'mysql:dbname=testdb_5;host=127.0.0.1'
#        WebDriver:
##          url: 'http://test5.localhost/'
